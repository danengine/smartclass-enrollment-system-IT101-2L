<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ProgressIndicator?>

<StackPane fx:controller="com.example.smartclass.LoginController"
           xmlns:fx="http://javafx.com/fxml"
           alignment="CENTER"
           stylesheets="@login.css"
           style="-fx-background-color: #f7f9fb;">

    <!-- Login Form Container -->
    <VBox fx:id="loginForm"
          alignment="CENTER"
          spacing="30"
          maxWidth="450"
          prefWidth="450"
          prefHeight="580"
          style="-fx-background-color: transparent;">

        <!-- Logo -->
        <ImageView fitWidth="150" fitHeight="150" preserveRatio="true">
            <image>
                <Image url="@images/logo.png"/>
            </image>
        </ImageView>

        <!-- Title -->
        <Label text="SmartClass Admin Login"
               style="-fx-font-size: 22px; -fx-text-fill: #1e3d59; -fx-font-weight: bold;"/>

        <!-- Username -->
        <TextField fx:id="usernameField"
                   promptText="Username"
                   maxWidth="320"
                   styleClass="text-field"/>

        <!-- Password Field (Hidden) -->
        <PasswordField fx:id="passwordField"
                       promptText="Password"
                       maxWidth="320"
                       styleClass="text-field"/>

        <!-- Visible Password Field (Shown when toggled) -->
        <TextField fx:id="passwordVisibleField"
                   promptText="Password"
                   maxWidth="320"
                   styleClass="text-field"
                   visible="false"
                   managed="false"/>

        <!-- Show Password Checkbox -->
        <CheckBox fx:id="showPasswordCheckBox"
                  text="Show Password"
                  onAction="#togglePasswordVisibility"
                  style="-fx-text-fill: #2c3e50;"/>

        <!-- Login Button -->
        <Button fx:id="loginButton"
                text="Login"
                onAction="#handleLogin"
                maxWidth="320"
                styleClass="login-button"/>

        <!-- Error Message -->
        <Label fx:id="errorLabel"
               text=""
               visible="false"
               styleClass="error-message"/>
    </VBox>

    <StackPane fx:id="loadingOverlay"
               visible="false"
               style="-fx-background-color: rgba(255,255,255,0.6);"
               alignment="CENTER">

        <ProgressIndicator fx:id="loadingSpinner"
                           maxWidth="50"
                           maxHeight="50"
                           styleClass="minimal-spinner"/>
    </StackPane>
</StackPane>